<!DOCTYPE html>  
<html>  
<head>  
    <title>张睿的看盘器</title>  
    <meta charset='UTF-8'>  
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script> 
    <style>
        body{
            background: black;
        }
        .ul{
            margin:20px 100px;
            padding: 10px 0;
            min-height:200px;
            background: #fff2e3;
        }
        .li_de_pic{
            float:left;
            margin:15px 25px;
        }
    </style>
</head> 
<body>       
                <!--道琼斯Start-->  
                 
                    <div class='ul bgGray'>  
                        <div class='li_de_pic'>  
                            <img class='smallPic DQSpicTime' />  
                        </div>  
                        <div class='li_de_pic'>  
                            <img class='smallPic DQSpicDay' />  
                        </div>  
                        <div class='clear'></div>  

                        <div class='li_t1_1'>道琼斯：</div>  
                        <div class='li_d1_1 DQSnowN'>--.--</div>  
                        <div class='li_d1_1 DQSnowV'>--.--</div>  
                        <div class='li_d1_1 DQSnowP'>--.--%</div>  
                        <div class='clear'></div>  
                         
                        <div class='li_de_t DQSnowO'>--.--</div>  
                        <div class='li_de_t DQSnowL'>--.--</div>  
                        <div class='li_de_t DQSnowH'>--.--</div>  
                        <div class='li_de_t DQSnowYC'>--.--</div>  
                        <div class='clear'></div>      
                    </div>  
                 
                <!--道琼斯End--> 
                <!--纳斯达克Start-->  
                 
                    <div class='ul bgWhite'> 
                        <div class='li_de_pic'>  
                            <img class='smallPic NSDKpicTime' />  
                        </div>  
                        <div class='li_de_pic'>  
                            <img class='smallPic NSDKpicDay' />  
                        </div>  
                        <div class='clear'></div>  

                        <div class='li_t1_1'>纳斯达克：</div>  
                        <div class='li_d1_1 NSDKnowN'>--.--</div>  
                        <div class='li_d1_1 NSDKnowV'>--.--</div>  
                        <div class='li_d1_1 NSDKnowP'>--.--%</div>  
                        <div class='clear'></div>  
                         
                        <div class='li_de_t NSDKnowO'>--.--</div>  
                        <div class='li_de_t NSDKnowL'>--.--</div>  
                        <div class='li_de_t NSDKnowH'>--.--</div>  
                        <div class='li_de_t NSDKnowYC'>--.--</div>  
                        <div class='clear'></div>   
                    </div>  
                 
                <!--纳斯达克End--> 

<script>
function getData(){   
        // loadScript('AjaxDataDQS',AjaxDataDQSUrl,showAjaxDataDQS);  
        loadScript('AjaxDataNSDK',AjaxDataNSDKUrl,showAjaxDataNSDK); 
        loadScript('AjaxDataDQS',AjaxDataDQSUrl,showMeTheMoney); 
} 

$(function(){  
        getData();  
        var refreshTime = 10000;  
        setInterval(getData,refreshTime);
}); 

function loadScript(id,url,callBack){  
    $.getScript(url+"&dt="+new Date().getTime(),callBack);  
} 

var AjaxDataDQSUrl = 'http://hq2gjgp.eastmoney.com/EM_Quote2010NumericApplication/Index.aspx?jsName=DataDQS&reference=rtj&type=f&id=INDU7'; 
var AjaxDataNSDKUrl = 'http://hq2gjgp.eastmoney.com/EM_Quote2010NumericApplication/Index.aspx?jsName=DataNSDK&reference=rtj&type=f&id=CCMP7'; 


function showMeTheMoney(){
    var DataNameCopy=DataDQS||DataNSDK;
    if(!DataNameCopy){return;} 
    var refreshTime = 10000;  
    
    var nameData = DataNameCopy.quotation[0].split(",");  
    var nameOpen = nameData[4];  
    var nameLow = nameData[7];  
    var nameHigh = nameData[6];  
    var nameNow = nameData[5];  
    var nameYClose = nameData[3];  
    var nameClass = nameNow>nameYClose?"colorRed":(nameNow<nameYClose?"colorGreen":"colorGray");  
    var nameOClass = nameOpen>nameYClose?"colorRed":(nameOpen<nameYClose?"colorGreen":"colorGray");  
    var nameLClass = nameLow>nameYClose?"colorRed":(nameLow<nameYClose?"colorGreen":"colorGray");  
    var nameHClass = nameHigh>nameYClose?"colorRed":(nameHigh<nameYClose?"colorGreen":"colorGray"); 
    $('.DQSnowO').html("开盘： <font class='bold "+nameOClass+"'>"+nameOpen+"</font>");  
    $('.DQSnowL').html("最低： <font class='bold "+nameLClass+"'>"+nameLow+"</font>");  
    $('.DQSnowH').html("最高： <font class='bold "+nameHClass+"'>"+nameHigh+"</font>");  
    $('.DQSnowYC').html("昨收： <font class='bold colorGray'>"+nameYClose+"</font>");  
    $('.DQSnowN').html("现价： <font class='bold "+nameClass+"'>"+nameNow+"</font>");  
    $('.DQSnowV').html(  
        "涨跌额： <font class='bold "+nameClass+"'>"  
        +Math.round((nameNow-nameYClose)*100)/100  
        +"</font>"  
    );  
    $('.DQSnowP').html(  
        "涨跌幅： <font class='bold "+nameClass+"'>"  
        +Math.round(((nameNow-nameYClose)/nameYClose*100)*100)/100  
        + " %"+"</font>"  
    ); 
    $('.DQSpicTime').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Picture/INDU7Rs.png?dt="+new Date().getTime());  
    $('.DQSpicDay').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Index.aspx?imagetype=KS&id=INDU7&UnitWidth=&Reference=xml&dt="+new Date().getTime()); 
}

function showAjaxDataDQS(){  
    if(!DataDQS){return;}  
    var refreshTime = 10000;  
    /*道琼斯Start*/  
    var DQSData = DataDQS.quotation[0].split(",");  
    var DQSOpen = DQSData[4];  
    var DQSLow = DQSData[7];  
    var DQSHigh = DQSData[6];  
    var DQSNow = DQSData[5];  
    var DQSYClose = DQSData[3];  
    var DQSClass = DQSNow>DQSYClose?"colorRed":(DQSNow<DQSYClose?"colorGreen":"colorGray");  
    var DQSOClass = DQSOpen>DQSYClose?"colorRed":(DQSOpen<DQSYClose?"colorGreen":"colorGray");  
    var DQSLClass = DQSLow>DQSYClose?"colorRed":(DQSLow<DQSYClose?"colorGreen":"colorGray");  
    var DQSHClass = DQSHigh>DQSYClose?"colorRed":(DQSHigh<DQSYClose?"colorGreen":"colorGray");  
    $('.DQSnowO').html("开盘： <font class='bold "+DQSOClass+"'>"+DQSOpen+"</font>");  
    $('.DQSnowL').html("最低： <font class='bold "+DQSLClass+"'>"+DQSLow+"</font>");  
    $('.DQSnowH').html("最高： <font class='bold "+DQSHClass+"'>"+DQSHigh+"</font>");  
    $('.DQSnowYC').html("昨收： <font class='bold colorGray'>"+DQSYClose+"</font>");  
    $('.DQSnowN').html("现价： <font class='bold "+DQSClass+"'>"+DQSNow+"</font>");  
    $('.DQSnowV').html(  
        "涨跌额： <font class='bold "+DQSClass+"'>"  
        +Math.round((DQSNow-DQSYClose)*100)/100  
        +"</font>"  
    );  
    $('.DQSnowP').html(  
        "涨跌幅： <font class='bold "+DQSClass+"'>"  
        +Math.round(((DQSNow-DQSYClose)/DQSYClose*100)*100)/100  
        + " %"+"</font>"  
    );  
    /*道琼斯End*/  
    //setTimeout(loadScript('AjaxDataDQS',AjaxDataDQSUrl,showAjaxDataDQS),refreshTime);  
  
    // img data  
    /*道琼斯*/  
    $('.DQSpicTime').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Picture/INDU7Rs.png?dt="+new Date().getTime());  
    $('.DQSpicDay').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Index.aspx?imagetype=KS&id=INDU7&UnitWidth=&Reference=xml&dt="+new Date().getTime());         
} 

function showAjaxDataNSDK(){  
    if(!DataNSDK){return;}  
    var refreshTime = 10000;  
    /*纳斯达克Start*/  
    var NSDKData = DataNSDK.quotation[0].split(",");  
    var NSDKOpen = NSDKData[4];  
    var NSDKLow = NSDKData[7];  
    var NSDKHigh = NSDKData[6];  
    var NSDKNow = NSDKData[5];  
    var NSDKYClose = NSDKData[3];  
    var NSDKClass = NSDKNow>NSDKYClose?"colorRed":(NSDKNow<NSDKYClose?"colorGreen":"colorGray");  
    var NSDKOClass = NSDKOpen>NSDKYClose?"colorRed":(NSDKOpen<NSDKYClose?"colorGreen":"colorGray");  
    var NSDKLClass = NSDKLow>NSDKYClose?"colorRed":(NSDKLow<NSDKYClose?"colorGreen":"colorGray");  
    var NSDKHClass = NSDKHigh>NSDKYClose?"colorRed":(NSDKHigh<NSDKYClose?"colorGreen":"colorGray");  
    $('.NSDKnowO').html("开盘： <font class='bold "+NSDKOClass+"'>"+NSDKOpen+"</font>");  
    $('.NSDKnowL').html("最低： <font class='bold "+NSDKLClass+"'>"+NSDKLow+"</font>");  
    $('.NSDKnowH').html("最高： <font class='bold "+NSDKHClass+"'>"+NSDKHigh+"</font>");  
    $('.NSDKnowYC').html("昨收： <font class='bold colorGray'>"+NSDKYClose+"</font>");  
    $('.NSDKnowN').html("现价： <font class='bold "+NSDKClass+"'>"+NSDKNow+"</font>");  
    $('.NSDKnowV').html(  
        "涨跌额： <font class='bold "+NSDKClass+"'>"  
        +Math.round((NSDKNow-NSDKYClose)*100)/100  
        +"</font>"  
    );  
    $('.NSDKnowP').html(  
        "涨跌幅： <font class='bold "+NSDKClass+"'>"  
        +Math.round(((NSDKNow-NSDKYClose)/NSDKYClose*100)*100)/100  
        + " %"+"</font>"  
    );  
    /*纳斯达克End*/  
    //setTimeout(loadScript('AjaxDataNSDK',AjaxDataNSDKUrl,showAjaxDataNSDK),refreshTime);  
    // img data  
    /*纳斯达克*/  
    $('.NSDKpicTime').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Picture/CCMP7Rs.png?dt="+new Date().getTime());  
    $('.NSDKpicDay').attr("src","http://hqgjgppic.eastmoney.com/EM_Quote2010PictureProducter/Index.aspx?imagetype=KS&id=CCMP7&UnitWidth=&Reference=xml&dt="+new Date().getTime());  
}  
</script>
</body>
</html>